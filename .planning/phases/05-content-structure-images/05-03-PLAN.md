---
phase: 05-content-structure-images
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/landing/Header.tsx
  - src/components/landing/Footer.tsx
  - src/components/landing/MobileMenu.tsx
  - src/pages/Index.tsx
  - src/pages/case-studies/InnesYoung.tsx
  - src/pages/LunchAndLearn.tsx
  - public/lovable-uploads/*.webp
autonomous: true

must_haves:
  truths:
    - "All local images render in WebP format instead of PNG"
    - "Every img tag has explicit width and height attributes"
    - "Below-fold images use loading=lazy"
    - "Above-fold images (Header logo, mobile logo) do NOT use loading=lazy"
    - "The unused 1.1MB PNG (3566a499) has been deleted"
    - "The site builds and all images display correctly"
  artifacts:
    - path: "public/lovable-uploads/d113002f-f6b2-41b5-aa96-2057ce8f4046.webp"
      provides: "WebP version of main logo (Header, Footer, MobileMenu)"
    - path: "public/lovable-uploads/3a6e6f00-b9ba-4507-a097-f7bef657f6ce.webp"
      provides: "WebP version of mobile logo (Index.tsx)"
    - path: "public/lovable-uploads/093e4cf4-8793-474f-a7d9-6ca869d392f7.webp"
      provides: "WebP version of VOSB badge (Footer)"
    - path: "public/lovable-uploads/177aec5f-3604-4fb9-aac0-ec91a10d1639.webp"
      provides: "WebP version of ESGR badge (Footer)"
    - path: "public/lovable-uploads/1078ef2b-dcf2-4e80-8022-0643ec9653ed.webp"
      provides: "WebP version of Canopy badge (Footer)"
    - path: "public/lovable-uploads/d8541ecf-d7f8-4c54-b92a-91f0aa1face0.webp"
      provides: "WebP version of InnesYoung logo"
    - path: "public/lovable-uploads/cb4bc5ad-603d-48d9-b4fe-0749e28a4217.webp"
      provides: "WebP version of LunchAndLearn meme"
  key_links:
    - from: "src/components/landing/Header.tsx"
      to: "public/lovable-uploads/d113002f-...webp"
      via: "img src attribute"
      pattern: "d113002f.*\\.webp"
    - from: "src/components/landing/Footer.tsx"
      to: "public/lovable-uploads/*.webp"
      via: "img src attributes for logo + 3 badges"
      pattern: "\\.webp"
---

<objective>
Convert all local PNG images to WebP, add width/height attributes and lazy loading to all img tags, and delete the unused 1.1MB image.

Purpose: IMG-01 (WebP conversion), IMG-02 (explicit dimensions), IMG-03 (lazy loading) -- the final three SEO requirements. This reduces total image payload by 25-80% and eliminates Cumulative Layout Shift from images without dimensions.

Output: 7 WebP images, updated img tags across 6 source files, 1 unused image deleted.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-content-structure-images/05-RESEARCH.md
@src/components/landing/Header.tsx
@src/components/landing/Footer.tsx
@src/components/landing/MobileMenu.tsx
@src/pages/Index.tsx
@src/pages/case-studies/InnesYoung.tsx
@src/pages/LunchAndLearn.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert PNGs to WebP and delete unused image</name>
  <files>
    public/lovable-uploads/d113002f-f6b2-41b5-aa96-2057ce8f4046.webp
    public/lovable-uploads/3a6e6f00-b9ba-4507-a097-f7bef657f6ce.webp
    public/lovable-uploads/093e4cf4-8793-474f-a7d9-6ca869d392f7.webp
    public/lovable-uploads/177aec5f-3604-4fb9-aac0-ec91a10d1639.webp
    public/lovable-uploads/1078ef2b-dcf2-4e80-8022-0643ec9653ed.webp
    public/lovable-uploads/d8541ecf-d7f8-4c54-b92a-91f0aa1face0.webp
    public/lovable-uploads/cb4bc5ad-603d-48d9-b4fe-0749e28a4217.webp
  </files>
  <action>
**Step 1: Install sharp as a dev dependency (temporary, for conversion only):**
```bash
npm install --save-dev sharp
```

**Step 2: Create a one-time conversion script** at `scripts/convert-to-webp.mjs`:
```javascript
import sharp from 'sharp';
import { readdir, unlink } from 'fs/promises';
import { join } from 'path';

const dir = 'public/lovable-uploads';
const files = await readdir(dir);
const pngs = files.filter(f => f.endsWith('.png'));

for (const png of pngs) {
  const input = join(dir, png);
  const output = join(dir, png.replace('.png', '.webp'));
  const info = await sharp(input).webp({ quality: 80 }).toFile(output);
  console.log(`${png} -> .webp (${info.size} bytes)`);
}
```

**Step 3: Run the conversion:**
```bash
node scripts/convert-to-webp.mjs
```

This will create 8 WebP files (one per PNG). Note the dimensions output by sharp -- you will need these for Task 2.

**Step 4: Delete the unused image:**
```bash
rm public/lovable-uploads/3566a499-a11a-45d6-a2cf-dbdc14dae7a6.png
rm public/lovable-uploads/3566a499-a11a-45d6-a2cf-dbdc14dae7a6.webp
```
(Delete both the original PNG and the WebP that was just created from it.)

**Step 5: Delete the original PNG files** (keep only WebP):
Delete all 7 remaining `.png` files from `public/lovable-uploads/` EXCEPT `og-image.png` which is NOT in the lovable-uploads directory (it is at `public/og-image.png` -- leave it alone).

Actually, `og-image.png` IS in `public/` not in `lovable-uploads/`, so deleting all PNGs in `lovable-uploads/` is safe.

```bash
rm public/lovable-uploads/*.png
```

**Step 6: Clean up:**
```bash
rm scripts/convert-to-webp.mjs
rmdir scripts 2>/dev/null  # Only if empty
npm uninstall sharp
```

Remove sharp from devDependencies since it was only needed for the one-time conversion.

**Step 7: Update `public/llms.txt`** which references the mobile logo PNG:
Change the image URL from `.png` to `.webp`:
`![10x Velocity Logo](https://10xvelocity.ai/lovable-uploads/3a6e6f00-b9ba-4507-a097-f7bef657f6ce.webp)`

**Step 8: Update `src/schemas/organization.ts`** which references the logo PNG in BUSINESS_DATA:
Change `logo: "https://10xvelocity.ai/lovable-uploads/d113002f-f6b2-41b5-aa96-2057dc8f4046.png"` to `.webp`.
Note: There is a typo in the existing URL (`2057dc8f` vs the actual file `2057ce8f`) -- preserve whatever URL is currently there, just change the extension to `.webp`.

**Important:** Record the pixel dimensions of each image from the sharp conversion output. You will need these for Task 2.
  </action>
  <verify>
Confirm 7 `.webp` files exist in `public/lovable-uploads/`. Confirm zero `.png` files remain in that directory. Confirm `public/og-image.png` still exists (untouched). Confirm `sharp` is NOT in package.json dependencies. Confirm `scripts/convert-to-webp.mjs` has been deleted.
  </verify>
  <done>7 WebP images created, all PNGs in lovable-uploads deleted, unused 1.1MB image deleted, sharp uninstalled, conversion script removed, llms.txt and organization.ts updated.</done>
</task>

<task type="auto">
  <name>Task 2: Update all img tags with WebP src, width/height, and lazy loading</name>
  <files>
    src/components/landing/Header.tsx
    src/components/landing/Footer.tsx
    src/components/landing/MobileMenu.tsx
    src/pages/Index.tsx
    src/pages/case-studies/InnesYoung.tsx
    src/pages/LunchAndLearn.tsx
  </files>
  <action>
Update every `<img>` tag that references a `lovable-uploads` PNG to use the WebP version, with explicit width/height and appropriate lazy loading.

Before editing, use sharp (or open the WebP files with Node) to read the exact pixel dimensions of each image. If sharp has been uninstalled, use a quick Node script:
```javascript
// Read dimensions without sharp
// Alternative: just check the files in the browser dev tools or use identify
```

Actually, you recorded the dimensions from the sharp output in Task 1. Use those values. If not available, install sharp temporarily again to read them, or use any available image dimension tool.

**File-by-file changes:**

**Header.tsx** (line ~24):
```tsx
<img
  src="/lovable-uploads/d113002f-f6b2-41b5-aa96-2057ce8f4046.webp"
  alt="10x Velocity Logo"
  className="h-12 w-auto"
  width={WIDTH}    // Replace with actual pixel width
  height={HEIGHT}  // Replace with actual pixel height
/>
```
- Change `.png` to `.webp`
- Add `width` and `height` attributes (natural pixel dimensions)
- Do NOT add `loading="lazy"` -- this is above the fold

**MobileMenu.tsx** (line ~55):
```tsx
<img
  src="/lovable-uploads/d113002f-f6b2-41b5-aa96-2057ce8f4046.webp"
  alt="10x Velocity Logo"
  className="h-12 w-auto"
  width={WIDTH}
  height={HEIGHT}
/>
```
- Change `.png` to `.webp`
- Add `width` and `height`
- Do NOT add `loading="lazy"` -- mobile menu logo is interaction-triggered but should load instantly

**Index.tsx** (line ~88):
```tsx
<img
  src="/lovable-uploads/3a6e6f00-b9ba-4507-a097-f7bef657f6ce.webp"
  alt="10x Velocity Logo"
  className="h-24 md:h-32 w-auto"
  width={WIDTH}
  height={HEIGHT}
/>
```
- Change `.png` to `.webp`
- Add `width` and `height`
- Do NOT add `loading="lazy"` -- this is the hero logo, above the fold

**Footer.tsx** (line ~45 -- main logo):
```tsx
<img
  src="/lovable-uploads/d113002f-f6b2-41b5-aa96-2057ce8f4046.webp"
  alt="10x Velocity Logo"
  className="h-16 w-auto"
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`
- Add `width`, `height`, `loading="lazy"` -- footer is below the fold

**Footer.tsx** (line ~91 -- VOSB badge):
```tsx
<img
  src="/lovable-uploads/093e4cf4-8793-474f-a7d9-6ca869d392f7.webp"
  alt="VOSB badge"
  className="..."
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`, add `width`, `height`, `loading="lazy"`

**Footer.tsx** (line ~96 -- ESGR badge):
```tsx
<img
  src="/lovable-uploads/177aec5f-3604-4fb9-aac0-ec91a10d1639.webp"
  alt="ESGR badge"
  className="..."
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`, add `width`, `height`, `loading="lazy"`

**Footer.tsx** (line ~106 -- Canopy badge):
```tsx
<img
  src="/lovable-uploads/1078ef2b-dcf2-4e80-8022-0643ec9653ed.webp"
  alt="Canopy badge"
  className="..."
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`, add `width`, `height`, `loading="lazy"`

**InnesYoung.tsx** (line ~92):
```tsx
<img
  src="/lovable-uploads/d8541ecf-d7f8-4c54-b92a-91f0aa1face0.webp"
  alt="Innes & Young Logo"
  className="w-60 md:w-[250px]"
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`, add `width`, `height`, `loading="lazy"`

**LunchAndLearn.tsx** (line ~82):
```tsx
<img
  src="/lovable-uploads/cb4bc5ad-603d-48d9-b4fe-0749e28a4217.webp"
  alt="..."
  className="..."
  width={WIDTH}
  height={HEIGHT}
  loading="lazy"
/>
```
- Change `.png` to `.webp`, add `width`, `height`, `loading="lazy"`

**Lazy loading rules:**
- Above-fold images (Header logo, MobileMenu logo, Index hero logo): NO `loading="lazy"`
- Below-fold images (Footer logo, Footer badges, InnesYoung logo, LunchAndLearn meme): YES `loading="lazy"`

**External images (Unsplash in Blog/BlogPost):** Do NOT modify. They are already optimized via Unsplash CDN parameters. However, if any Unsplash `<img>` tags lack `width`/`height`, add `width={600} height={400}` to match the `?w=600&h=400` crop parameters in the URL. Add `loading="lazy"` to blog post card images in Blog.tsx (they are below the fold). Check Blog.tsx and BlogPost.tsx for Unsplash image tags and update accordingly.
  </action>
  <verify>
Run `npm run build` -- no TypeScript errors. Run `npm run dev` and:
1. Check homepage -- logo loads immediately (no lazy flash), renders correctly
2. Check footer -- badges appear on scroll, render correctly
3. Check `/case-studies/innes-young` -- logo renders in WebP
4. Check `/events/lunch-and-learn` -- meme image renders in WebP
5. Open browser DevTools Network tab, filter by "img" -- confirm all local images serve as .webp
6. Inspect any below-fold image element -- confirm `loading="lazy"` attribute present
7. Inspect Header logo element -- confirm NO `loading="lazy"` attribute
  </verify>
  <done>All local img tags reference WebP files, have explicit width/height, and below-fold images use loading="lazy". Above-fold images load eagerly. External Unsplash images have width/height where missing. Build passes and all images display correctly.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. Zero PNG files remain in `public/lovable-uploads/` (only WebP)
3. `public/og-image.png` is untouched (it is in `public/`, not `lovable-uploads/`)
4. Every `<img>` tag in the codebase that references lovable-uploads uses `.webp` extension
5. Every `<img>` tag has `width` and `height` attributes
6. Below-fold images have `loading="lazy"`, above-fold images do not
7. The unused 1.1MB image is deleted
8. `sharp` is not in package.json (was temporary)
9. No conversion script remains in the repo
</verification>

<success_criteria>
- All local images converted to WebP and PNGs removed (IMG-01 complete)
- All img tags have explicit width/height attributes (IMG-02 complete)
- Below-fold images lazy load, above-fold images load eagerly (IMG-03 complete)
- Unused 1.1MB image deleted
- Total image payload reduced significantly (expected 25-80% savings)
- Build passes and site renders correctly
</success_criteria>

<output>
After completion, create `.planning/phases/05-content-structure-images/05-03-SUMMARY.md`
</output>
